(function(){if(!window.FXStreetAuth){window.FXStreetAuth={};var n=window.FXStreetAuth;n.Authorization=function(){var n,t=function(){var n=function(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))},t=function(){var n=$.fn.jquery.split(".");return parseInt(n[0])>0&&parseInt(n[1])>=8},i=function(n,i,r,u){return t()?n.then(i,r,u):n.pipe(i,r,u)},r=function(n){return n!==null&&typeof n=="object"};return{getUrlParameter:n,invokeThen:i,isObject:r}}(),i=function(){var n=window.localStorage;const t="authByDomain",i="creationDateISO";this.setToken=function(r){var u,f;if(n&&r)try{u=$.extend({},r);u[i]=(new Date).toISOString();f=JSON.stringify(u);n.setItem(t,f)}catch(e){}};this.getToken=function(){var u,e,f;if(n)try{e=n.getItem(t);f=JSON.parse(e);r(f)&&(u=$.extend({},f),delete u[i])}catch(o){}return u};var r=function(r){var u=!1;if(r){const e=r[i],o=r.expires_in;f(e,o)?n.removeItem(t):u=!0}return u},u=function(n){return n<new Date("2021-02-11T10:18:45.643Z")},f=function(n,t){var r=!1,i;if(n&&t){if(i=new Date(n),u(i))return!0;var f=new Date,e=Math.abs(f.getTime()-i.getTime()),o=Math.ceil(e/1e3);r=o+300>=parseInt(t)}return r}},r=function(n){var r={authorizationUrl:"https://authorization.fxstreet.com/token",logging:!0,client_id:"client_id"},f,u,o=function(n){r.logging&&console.log(n)},e;this.getTokenPromise=function(){if(u)return u;var n=f.getToken();return n?$.when(n):u=t.invokeThen(e(),function(n){return f.setToken(n),u=null,n},function(n){u=null;o(n)})};e=function(){return jQuery.ajax({type:"POST",url:r.authorizationUrl,contentType:"application/x-www-form-urlencoded",dataType:"json",data:{grant_type:"domain",client_id:r.client_id}})},function(){$.type(n)==="object"&&$.extend(!0,r,n);r.logging=r.logging||t.getUrlParameter("fxslogging")!=="";f=new i}()};return{getInstance:function(t){return n||(n=new r(t)),n}}}()}})();
//# sourceMappingURL=fxstreet.min.js.map