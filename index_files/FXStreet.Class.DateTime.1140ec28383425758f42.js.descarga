(window.webpackJsonpfxsSite=window.webpackJsonpfxsSite||[]).push([[36],{199:function(e,t,n){"use strict";var i=n(11),o=n(112).trim;i({target:"String",proto:!0,forced:n(200)("trim")},{trim:function(){return o(this)}})},200:function(e,t,n){var i=n(2),o=n(113);e.exports=function(e){return i((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},423:function(e,t,n){"use strict";n.r(t);n(84),n(199);FXStreet.Class.DateTime=function(){var e=FXStreet.Class.Base(),t=FXStreet.Util.extendObject(e);t.TimeDisplayFormat="",t.TimeZoneIsFromUserDevice=!1,t.CurrentTimeZone=null,t.ChangeTimeZoneTitle="",t.ContainerId="",t.hideElementsCssClass="fxs_hideElements",t.TimeFormat="twentyFourFormat",t.IsTwelveTimeFormat=!1,t.TimeZoneDisplayValue=null;var n=null,i=null,o=null,r=null,a=null;t.init=function(e){t.setSettingsByObject(e),t.setVars(),s()};var s=function(){FXStreet.Util.loadHtmlTemplate("timezone.html").done((function(e){var r={TimeDisplayFormat:"",TimeZoneIsFromUserDevice:!1,CurrentTimeZone:null,ChangeTimeZoneTitle:"",ContainerId:"",TimezoneButtonArrowId:"fxs_changetimezone_button_arrow"},a=FXStreet.Util.renderByHtmlTemplate(e,r);o.html(a),n=FXStreet.Util.getjQueryObjectById("fxs_it_timezones"),i=FXStreet.Util.getjQueryObjectById("fxs_changetimezone_button_arrow"),FXStreet.Util.getjQueryObjectBySelector("#fxs_changetimezone_button").click(l),t.timeFormatGroupChangeEvent(),FXStreet.Util.getClass("TimeZoneManager",(function(){var e=FXStreet.Class.Patterns.Singleton.TimeZoneManager.Instance();e.setTimeZone(t.CurrentTimeZone),t.TimeZoneDisplayValue=e.GetTimeZoneOffsetString()}),(function(){})),f()}))},l=function(){t.timezoneButtonClick()};t.setVars=function(){o=FXStreet.Util.getjQueryObjectById(t.ContainerId),r="timezone_error_wrapper_"+t.ContainerId,document.addEventListener("updateClockEvent",(function(e){null!==e.detail.isTwelveTimeFormat&&(t.IsTwelveTimeFormat=e.detail.isTwelveTimeFormat),f(),t.saveTimeZone(e.detail.timezoneIdSelected,e.detail.isTwelveTimeFormat)}))},t.timezoneButtonClick=function(){(n=FXStreet.Util.getjQueryObjectById("fxs_it_timezones"))&&!$.trim(n.html())?FXStreet.Util.getClass("TimeZoneManager",(function(){FXStreet.Class.Patterns.Singleton.TimeZoneManager.Instance().GetTimeZoneModel().then(m)}),(function(){})):u()},t.timeFormatGroupChangeEvent=function(){$(document).on("change","input[type=radio]",(function(){var e="true"==$('[name="timeFormatRadios"]:checked').val();t.saveTimeZone(t.CurrentTimeZone.TimeZoneId,e)}))};var m=function(e){FXStreet.Util.loadHtmlTemplate("timezone_options.html").done((function(i){e.TimezoneErrorWrapperId=r,void 0!==e.IsTwelveTimeFormat&&(t.IsTwelveTimeFormat=e.IsTwelveTimeFormat);var o=FXStreet.Util.renderByHtmlTemplate(i,e);n.html(o),FXStreet.Util.getjQueryObjectById("fxs_timezone_closeBtn").click(u),n.find("li").click((function(){var e=$(this).attr("timezone-id");t.saveTimeZone(e)})),n.find("button").click((function(){var e=$(this).attr("timezone-id");t.saveTimeZone(e)})),c(!1),T(),n.detach().appendTo("body"),a=FXStreet.Util.getjQueryObjectById(r)}))},u=function(){n.empty(),c(!0)},c=function(e){e?i.removeClass("fa-chevron-up").addClass("fa-chevron-down"):i.removeClass("fa-chevron-down").addClass("fa-chevron-up")},T=function(){$((function(){var e=t.IsTwelveTimeFormat?"#twelveFormat":"#twentyFourFormat";$(e).prop("checked",!0)}))};t.saveTimeZone=function(e,n){if(!t.CurrentTimeZone||t.CurrentTimeZone.TimeZoneId!==e||t.IsTwelveTimeFormat!==n){var i=!e;FXStreet.Util.getClass("TimeZoneManager",(function(){i&&(e=FXStreet.Class.Patterns.Singleton.TimeZoneManager.Instance().GetBrowserTimeZoneId());var o={TimeZoneIsFromUserDevice:i,TimeZoneInfoId:null===e?t.CurrentTimeZone.TimeZoneId:e,IsTwelveTimeFormat:null===n?t.IsTwelveTimeFormat:n};if(FXStreet.Resource.UserInfo.IsLogged){var r=FXStreet.Util.createUrl(FXStreet.Resource.FxsApiRoutes.TimeZonePut,[]);return $.ajax({url:r,method:"PUT",contentType:"application/json",data:JSON.stringify({TimeZoneCookie:JSON.stringify(o)})}).done((function(){null!==a&&a.addClass(t.hideElementsCssClass),window.location.reload()})).fail((function(){null!==a&&a.removeClass(t.hideElementsCssClass),d(o),setTimeout((function(){window.location.reload()}),5e3)}))}d(o),window.location.reload()}),(function(){})),i&&(e=FXStreet.Class.Patterns.Singleton.TimeZoneManager.Instance().GetBrowserTimeZoneId())}};var d=function(e){FXStreet.Util.getClass("FxsCookiesManager",(function(){FXStreet.Class.Patterns.Singleton.FxsCookiesManager.Instance().UpdateCookie(FXStreet.Util.FxsCookie.UserTimeConfiguration,JSON.stringify(e),7300)}),(function(){}))},f=function(){FXStreet.Util.getClass("ClockZone",(function(){var e=new FXStreet.Class.ClockZone,n={ContainerSelector:"#fxs_changetimezone_button",TimeDisplayFormat:t.TimeDisplayFormat,IsTwelveTimeFormat:t.IsTwelveTimeFormat,TimeZoneDisplayValue:t.TimeZoneDisplayValue,HoursUtcOffset:t.CurrentTimeZone?t.CurrentTimeZone.HoursUtcOffset:0,TimeZoneIsFromUserDevice:t.TimeZoneIsFromUserDevice};e.init(n)}),(function(){}))};return t}}}]);
//# sourceMappingURL=FXStreet.Class.DateTime.1140ec28383425758f42.js.map