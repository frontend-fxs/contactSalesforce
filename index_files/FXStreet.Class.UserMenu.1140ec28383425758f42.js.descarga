(window.webpackJsonpfxsSite=window.webpackJsonpfxsSite||[]).push([[98],{148:function(e,t,n){var i=n(8),s=n(10).f,o=Function.prototype,r=o.toString,u=/^\s*function ([^ (]*)/;!i||"name"in o||s(o,"name",{configurable:!0,get:function(){try{return r.call(this).match(u)[1]}catch(e){return""}}})},422:function(e,t,n){"use strict";n.r(t);n(84),n(148);FXStreet.Class.UserMenu=function(){var e=FXStreet.Class.Base(),t=FXStreet.Util.extendObject(e);t.UserInfo=null,t.SignupUrl="",t.LoginUrl="",t.SignupLabel="",t.LoginLabel="",t.LogoutLabel="",t.MySuscriptionsLabel="",t.ContainerId="",t.MySuscriptionsUrl="",t.Product="";var n=FXStreet.Resource.FxsApiRoutes.LogoutUrl,i=null,s=null,o=null,r=null,u=null,l=null;t.init=function(e){t.setSettingsByObject(e),t.setVars(),a(),t.addEvents()},t.setVars=function(){u=FXStreet.Util.getjQueryObjectById(t.ContainerId),l=FXStreet.Util.getObjectInstance("MenusSubscriber")};var a=function(){t.UserInfo.IsLogged?FXStreet.Util.getClass("UserService",(function(){FXStreet.Class.User.Service.getInstance().getUserInfo().done((function(e){t.UserInfo.FirstName=e.name||e.email,c()})).fail((function(){c()}))}),(function(){})):c()},c=function(){FXStreet.Util.loadHtmlTemplate("usermenu.html").done((function(e){var n=FXStreet.Util.renderByHtmlTemplate(e,t);u.html(n),f()}))},f=function(){t.UserInfo.IsLogged?(FXStreet.Util.getjQueryObjectById("logout").click(C),d()):(i=FXStreet.Util.getjQueryObjectById("signup"),s=FXStreet.Util.getjQueryObjectById("login"),i.click(t.Signup),s.click(t.Login),S())},d=function(){FXStreet.Util.getjQueryObjectById("user-option-button").click(g),(o=FXStreet.Util.getjQueryObjectById("fxs_user_options")).find(".fa-times").click(g)},g=function(){o.toggleClass("fxs_hideElements"),o.hasClass("fxs_hideElements")?l.unsubscribe("fxs_user_options"):l.subscribe("fxs_user_options",m,["fxs_user_options","user-option-button"])},m=function(){g()},S=function(){FXStreet.Util.getjQueryObjectById("user-show-button").click(p),(r=FXStreet.Util.getjQueryObjectById("fxs_user_access")).find(".fa-times").click(p)},p=function(){r.toggleClass("fxs_hidden_s"),r.hasClass("fxs_hidden_s")?l.unsubscribe("fxs_user_access"):l.subscribe("fxs_user_access",F,["fxs_user_access","user-show-button"])},F=function(){p()},C=function(){$.ajax({type:"GET",url:n}).success((function(){location.reload()}))},U=function(e){var n=-1===e.indexOf("?"),i=e+(n?"?":"&")+"uriToRedirect="+location.href;t.Product&&(i+="&product="+t.Product),location.href=i};return t.Signup=function(){U(t.SignupUrl)},t.Login=function(){U(t.LoginUrl)},t},FXStreet.Class.ClockZone=function(){var e=FXStreet.Class.Base(),t=FXStreet.Util.extendObject(e);return t.ContainerSelector="",t.TimeDisplayFormat="",t.IsTwelveTimeFormat=!1,t.TimeZoneDisplayValue=null,t.Container=null,t.TimeInput=null,t.HoursUtcOffset=null,t.init=function(e){t.setSettingsByObject(e),t.setVars(),t.updateClock(),t.addEvents()},t.setVars=function(){t.Container=FXStreet.Util.getjQueryObjectBySelector(t.ContainerSelector),t.TimeInput=t.Container.find("time")},t.addEvents=function(){t.Container.on("click",t.containerClick);var e=new Date,n=6e4-1e3*e.getUTCSeconds()+e.getUTCMilliseconds();setTimeout((function(){setInterval(t.updateClock,6e4),t.updateClock()}),n)},t.containerClick=function(){},t.updateClock=function(){FXStreet.Util.getClass("TimeZoneManager",(function(){FXStreet.Util.getClass("FxsCookiesManager",(function(){var e=FXStreet.Class.Patterns.Singleton.TimeZoneManager.Instance(),n=e.GetMomentDateWithCurrentTimezone();t.TimeInput.attr("datetime",e.DateFormat(n,"YYYY-MM-DD HH:mm:ss"));var i=e.DateFormat(n,t.TimeDisplayFormat),s=new CustomEvent("calendar-update-clock",{detail:n});document.dispatchEvent(s);var o=FXStreet.Class.Patterns.Singleton.FxsCookiesManager.Instance().GetCookieValue(FXStreet.Util.FxsCookie.UserTimeConfiguration),r=!1;null!=o&&(r=JSON.parse(o).IsTwelveTimeFormat),(r||t.IsTwelveTimeFormat)&&(i=e.DateToTwelveFormat(n)),null===t.TimeZoneDisplayValue&&(t.TimeZoneDisplayValue=e.GetTimeZoneOffsetString()),i+=" "+t.TimeZoneDisplayValue,t.TimeInput.html(i)}),(function(){}))}),(function(){}))},t}}}]);
//# sourceMappingURL=FXStreet.Class.UserMenu.1140ec28383425758f42.js.map