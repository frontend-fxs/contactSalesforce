(window.webpackJsonpfxsSite=window.webpackJsonpfxsSite||[]).push([[45],{384:function(e,t){FXStreet.Class.GlobalAlert=function(){var e=FXStreet.Class.Base(),t=FXStreet.Util.extendObject(e);t.ContainerId="",t.HttpPushServerKeysUrl="",t.HttpPushServerUrl="",t.Title="",t.ImageUrl="",t.Link="",t.IsModal=!1,t.GlobalAlertKey="GlobalAlertRemainHide",t.Container=null,t.HtmlTemplateFile=function(){return"globalalert_default.html"},t.CloseButtonId="",t.init=function(e){FXStreet.Util.getPlugin("Cookie",(function(){t.setSettingsByObject(e),t.setVars(),t.render(),n(t.subscribeToPush)}),(function(){}))};var n=function(e){setTimeout((function(){try{e()}catch(e){console.log("cannot stablish connection")}}),2e3)};t.setVars=function(){t.Container=FXStreet.Util.getjQueryObjectById(t.ContainerId),t.CloseButtonId=FXStreet.Util.guid()},t.render=function(){if(t.Title&&void 0===$.cookie(t.GlobalAlertKey)){t.Container.addClass("fxs_global_alert fxs_alert_featured alert alert-dismissible fade in");var e={Title:t.Title,ImageUrl:t.ImageUrl,Link:t.Link,CloseButtonId:t.CloseButtonId};t.htmlRender(e)}else t.Container.hide()},t.subscribeToPush=function(){var e={culture:FXStreet.Resource.CultureName,httpPushServerUrl:t.HttpPushServerUrl};FXStreetPush.PushNotification.getInstance(e).globalAlertSubscribe(l)};var l=function(e){if(null===e)throw"fxserror (GlobalAlert): Error receiving push";e.LanguageId==FXStreet.Resource.LanguageId&&($.removeCookie(t.GlobalAlertKey,{path:"/"}),t.Title=e.Title,t.ImageUrl=e.ImageUrl,t.Link=e.Link,t.render())};return t.htmlRender=function(e){FXStreet.Util.loadHtmlTemplate(t.HtmlTemplateFile()).done((function(n){t.Container.show();var l=FXStreet.Util.renderByHtmlTemplate(n,e);t.Container.html(l);var r=FXStreet.Util.getjQueryObjectById("linkid"),i=FXStreet.Util.getjQueryObjectById(t.CloseButtonId);r.on("click",t.onCloseButtonClick),i.on("click",t.onCloseButtonClick)}))},t.onCloseButtonClick=function(){var e=new Date;e.setMinutes(e.getMinutes()+120),$.cookie(t.GlobalAlertKey,"",{path:"/",expires:e}),t.Container.hide()},t}}}]);
//# sourceMappingURL=FXStreet.Class.GlobalAlert.1140ec28383425758f42.js.map